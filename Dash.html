<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
     rel="stylesheet">
    
</head>

<body class="bg-white">

 

<div id="section-dashboard" class="page-section dashboard-section">
        <div class="container my-5">
            <button class="btn btn-secondary mb-3" onclick="retourLogin()">
                <i class="bi bi-arrow-left"></i> Retour
            </button>
            
            <div class="d-flex justify-content-center m-4 bg-light w-100">
                <h4 class="text-center">Bonjour, bienvenue dans votre espace apprenant</h4>
            </div>

            <div class="d-flex justify-content-evenly align-items-center m-5">
                <button class="btn btn-primary" onclick="afficherProfil()">Profil</button>
                <button class="btn btn-primary" onclick="afficherHistoriqueEtudiant()">Historique</button>
                <button class="btn btn-primary" onclick="afficherStatistiquesEtudiant()">Statistiques</button>
            </div>

            <div class="rounded-3 bg-info w-50 mx-auto p-3">
                <div class="d-flex align-items-center">
                    <h4 class="m-3">Nom:</h4>
                    <h3 id="dashNom">-</h3>
                </div>
                <div class="d-flex align-items-center">
                    <h4 class="m-3">Prénom:</h4>
                    <h3 id="dashPrenom">-</h3>
                </div>
                <div class="d-flex align-items-center">
                    <h4 class="m-3">Groupe:</h4>
                    <h3 id="dashGroupe">-</h3>
                </div>
            </div>

            <div class="bg-secondary w-75 mx-auto m-5 rounded-3 p-3">
                <div class="row mb-2">
                    <h4 class="col-6">Total de jours enregistrés:</h4>
                    <h5 class="col-6 text-end" id="dashTotalJours">0</h5>
                </div>
                <div class="row mb-2">
                    <h4 class="col-6">Nombre d'absences:</h4>
                    <h5 class="col-6 text-end" id="dashAbsences">0</h5>
                </div>
                <div class="row mb-2">
                    <h4 class="col-6">Nombre de retards:</h4>
                    <h5 class="col-6 text-end" id="dashRetards">0</h5>
                </div>
                <div class="row mb-2">
                    <h4 class="col-6">Taux de présence (%):</h4>
                    <h5 class="col-6 text-end" id="dashTauxPresence">0%</h5>
                </div>
            </div>
        </div>
    </div>

<SCRipt>

   function mettreAJourDashboard() {
    if (!etudiantConnecte) return;
    
    document.getElementById('dashNom').textContent = etudiantConnecte.Nom;
    document.getElementById('dashPrenom').textContent = etudiantConnecte.Prenom;
    document.getElementById('dashGroupe').textContent = etudiantConnecte.groupe;
    
    calculerStatistiquesDashboard();
}

function calculerStatistiquesDashboard() {
    if (!etudiantConnecte) return;
    
    const presences = JSON.parse(localStorage.getItem('presences')) || {};
    
    let totalJours = 0;
    let absences = 0;
    let retards = 0;
    let totalPresences = 0;
    
    Object.values(presences).forEach(presence => {
        if (presence.id === etudiantConnecte.id) {
            totalJours++;
            totalPresences++;
            
            if (presence.statut === 'absent') {
                absences++;
            } else if (presence.statut === 'retard') {
                retards++;
            }
        }
    });
    
    const tauxPresence = totalPresences > 0 ? 
        Math.round(((totalPresences - absences) / totalPresences) * 100) : 0;
    
    document.getElementById('dashTotalJours').textContent = totalJours;
    document.getElementById('dashAbsences').textContent = absences;
    document.getElementById('dashRetards').textContent = retards;
    document.getElementById('dashTauxPresence').textContent = tauxPresence + '%';
}



</SCRipt>

</body>
</html>



